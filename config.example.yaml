# yaml-language-server: $schema=./static/schemas/config.json
#
# YC Scheduler Configuration Example
#
# This file demonstrates the configuration structure for yc-scheduler.
# The JSON Schema is available at: ./static/schemas/config.json
#
# To validate this configuration against the schema, you can use:
# - VS Code with YAML extension (automatic validation)
# - yamllint with schema validation
# - Online JSON Schema validators
#
# For more information, see: https://json-schema.org/

# Global configuration options
timezone: Europe/Moscow # Timezone for schedules (default: system timezone)
max_concurrent_jobs: 5 # Maximum concurrent job executions (default: 5)
validation_interval: 10m # State validator check interval (default: 10m)
shutdown_timeout: 5m # Graceful shutdown timeout (default: 5m)
metrics_enabled: false # Enable Prometheus metrics HTTP server (default: false)
metrics_port: 9090 # Port for metrics server (default: 9090)

schedules:
  # Example: Daily schedule to start a VM at 9:00 AM
  - name: vm-production-start
    type: daily
    resource:
      type: vm
      id: fhm1234567890abcdef
      folder_id: b1g1234567890abcdef
    actions:
      start:
        enabled: true
        time: 09:00
      stop:
        enabled: false

  # Example: Cron schedule to stop a VM every day at 18:00
  - name: vm-production-stop
    type: cron
    resource:
      type: vm
      id: fhm1234567890abcdef
      folder_id: b1g1234567890abcdef
    actions:
      stop:
        enabled: true
        crontab: 0 18 * * *

  # Example: Weekly schedule to stop a VM every Monday at 08:00
  - name: vm-weekly-stop
    type: weekly
    resource:
      type: vm
      id: fhm0987654321fedcba
      folder_id: b1g1234567890abcdef
    actions:
      stop:
        enabled: true
        day: 1 # Monday (0=Sunday, 1=Monday, ..., 6=Saturday)
        time: 08:00

  # Example: Monthly schedule to start a VM on the 1st day of each month
  - name: vm-monthly-start
    type: monthly
    resource:
      type: vm
      id: fhmabcdef1234567890
      folder_id: b1g1234567890abcdef
    actions:
      start:
        enabled: true
        day: 1
        time: 00:00

  # Example: Duration-based schedule (every 2 hours)
  - name: vm-periodic-start
    type: duration
    resource:
      type: vm
      id: fhm1111111111111111
      folder_id: b1g1234567890abcdef
    actions:
      start:
        enabled: true
        duration: 2h

  # Example: One-time schedule
  - name: vm-onetime-maintenance
    type: one-time
    resource:
      type: vm
      id: fhm2222222222222222
      folder_id: b1g1234567890abcdef
    actions:
      stop:
        enabled: true
        time: 2024-12-31T23:59:59Z

  # Example: Kubernetes Cluster schedule
  # Note: Each action can have its own schedule parameters
  - name: k8s-cluster-maintenance
    type: weekly
    resource:
      type: k8s_cluster
      id: catabcdef1234567890
      folder_id: b1g1234567890abcdef
    actions:
      stop:
        enabled: true
        day: 0 # Sunday
        time: 02:00
      start:
        enabled: true
        day: 1 # Monday
        time: 02:15
