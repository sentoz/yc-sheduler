{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://github.com/sentoz/yc-sheduler/internal/config/schedule-manifest",
  "$ref": "#/$defs/ScheduleManifest",
  "$defs": {
    "ActionConfig": {
      "properties": {
        "time": {
          "type": "string",
          "description": "Time specifies the time to perform the action.\nFor daily, weekly, monthly schedules: HH:MM or HH:MM:SS format (e.g., \"09:00\")."
        },
        "crontab": {
          "$ref": "#/$defs/Crontab",
          "description": "Crontab is a cron expression for cron-based schedules (e.g., \"0 9 * * *\" for daily at 9 AM)."
        },
        "day": {
          "type": "integer",
          "description": "Day specifies the day of the week (0=Sunday, 1=Monday, ..., 6=Saturday) for weekly schedules,\nor the day of the month (1-31) for monthly schedules.",
          "examples": [
            1
          ]
        },
        "enabled": {
          "type": "boolean",
          "description": "Enabled indicates whether this action is enabled."
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "enabled"
      ],
      "description": "ActionConfig defines configuration for a specific action."
    },
    "Actions": {
      "properties": {
        "start": {
          "$ref": "#/$defs/ActionConfig",
          "description": "Start defines when to start the resource."
        },
        "stop": {
          "$ref": "#/$defs/ActionConfig",
          "description": "Stop defines when to stop the resource."
        }
      },
      "additionalProperties": false,
      "type": "object",
      "description": "Actions defines what actions to perform on the resource."
    },
    "CronJobConfig": {
      "properties": {
        "crontab": {
          "$ref": "#/$defs/Crontab",
          "description": "Crontab is a cron expression (e.g., \"0 9 * * *\" for daily at 9 AM)."
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "crontab"
      ],
      "description": "CronJobConfig defines configuration for a cron-based schedule.\nDeprecated: Parameters are now read from ActionConfig."
    },
    "Crontab": {
      "type": "string",
      "minLength": 1,
      "pattern": "^(\\S+\\s+){4,5}\\S+$",
      "description": "Cron expression (5 or 6 fields: minute hour day month weekday [second])",
      "examples": [
        "0 9 * * *",
        "0 0 * * 0",
        "*/5 * * * *"
      ]
    },
    "DailyJobConfig": {
      "properties": {
        "time": {
          "$ref": "#/$defs/Time",
          "description": "Time specifies the time of day (HH:MM or HH:MM:SS format)."
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "time"
      ],
      "description": "DailyJobConfig defines configuration for a daily schedule.\nDeprecated: Parameters are now read from ActionConfig."
    },
    "MonthlyJobConfig": {
      "properties": {
        "time": {
          "$ref": "#/$defs/Time",
          "description": "Time specifies the time of day (HH:MM or HH:MM:SS format)."
        },
        "day": {
          "type": "integer",
          "maximum": 31,
          "minimum": 1,
          "description": "Day specifies the day of the month (1-31).",
          "examples": [
            1
          ]
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "time",
        "day"
      ],
      "description": "MonthlyJobConfig defines configuration for a monthly schedule.\nDeprecated: Parameters are now read from ActionConfig."
    },
    "Resource": {
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "vm",
            "k8s_cluster"
          ],
          "description": "Type specifies the resource type (vm, k8s_cluster).",
          "examples": [
            "vm"
          ]
        },
        "id": {
          "type": "string",
          "minLength": 1,
          "description": "ID is the resource identifier in Yandex Cloud.",
          "examples": [
            "fhm1234567890abcdef"
          ]
        },
        "folder_id": {
          "type": "string",
          "minLength": 1,
          "description": "FolderID is the Yandex Cloud folder ID containing the resource.",
          "examples": [
            "b1g1234567890abcdef"
          ]
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "type",
        "id",
        "folder_id"
      ],
      "description": "Resource defines a cloud resource to manage."
    },
    "ScheduleManifest": {
      "properties": {
        "apiVersion": {
          "type": "string",
          "enum": [
            "scheduler.yc/v1alpha1"
          ],
          "examples": [
            "scheduler.yc/v1alpha1"
          ]
        },
        "kind": {
          "type": "string",
          "enum": [
            "Schedule"
          ],
          "examples": [
            "Schedule"
          ]
        },
        "metadata": {
          "$ref": "#/$defs/ScheduleManifestMeta"
        },
        "spec": {
          "$ref": "#/$defs/ScheduleManifestSpec"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "apiVersion",
        "kind",
        "metadata",
        "spec"
      ],
      "description": "ScheduleManifest is a Kubernetes-like schedule document."
    },
    "ScheduleManifestMeta": {
      "properties": {
        "name": {
          "type": "string",
          "minLength": 1,
          "examples": [
            "vm-production-start"
          ]
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "name"
      ],
      "description": "ScheduleManifestMeta holds schedule object metadata."
    },
    "ScheduleManifestSpec": {
      "properties": {
        "actions": {
          "$ref": "#/$defs/Actions",
          "description": "Actions defines what actions to perform at scheduled times."
        },
        "cron_job": {
          "$ref": "#/$defs/CronJobConfig",
          "description": "CronJob configuration (used when Type is \"cron\")."
        },
        "daily_job": {
          "$ref": "#/$defs/DailyJobConfig",
          "description": "DailyJob configuration (used when Type is \"daily\")."
        },
        "weekly_job": {
          "$ref": "#/$defs/WeeklyJobConfig",
          "description": "WeeklyJob configuration (used when Type is \"weekly\")."
        },
        "monthly_job": {
          "$ref": "#/$defs/MonthlyJobConfig",
          "description": "MonthlyJob configuration (used when Type is \"monthly\")."
        },
        "resource": {
          "$ref": "#/$defs/Resource",
          "description": "Resource defines the target resource to manage."
        },
        "type": {
          "type": "string",
          "enum": [
            "cron",
            "daily",
            "weekly",
            "monthly"
          ],
          "description": "Type specifies the schedule type (cron, daily, weekly, monthly).",
          "examples": [
            "daily"
          ]
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "actions",
        "resource",
        "type"
      ],
      "description": "ScheduleManifestSpec defines schedule settings for a manifest."
    },
    "Time": {
      "type": "string",
      "minLength": 5,
      "pattern": "^([0-1][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?$",
      "description": "Time of day in HH:MM or HH:MM:SS format",
      "examples": [
        "09:00",
        "23:59",
        "12:30:45"
      ]
    },
    "WeeklyJobConfig": {
      "properties": {
        "time": {
          "$ref": "#/$defs/Time",
          "description": "Time specifies the time of day (HH:MM or HH:MM:SS format)."
        },
        "day": {
          "type": "integer",
          "maximum": 6,
          "minimum": 0,
          "description": "Day specifies the day of the week (0=Sunday, 1=Monday, ..., 6=Saturday).",
          "examples": [
            1
          ]
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "time",
        "day"
      ],
      "description": "WeeklyJobConfig defines configuration for a weekly schedule.\nDeprecated: Parameters are now read from ActionConfig."
    }
  },
  "title": "YC Scheduler Schedule Manifest",
  "description": "Schedule manifest schema for YC Scheduler application"
}
